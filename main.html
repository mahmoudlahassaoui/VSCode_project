<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main.rs Code</title>
    <style>
        body {
            background-color: #2f2f2f;
            font-family: Arial, sans-serif;
        }
        pre {
            font-size: 24px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #1f1f1f;
        }
        code {
            color: #fff;
        }
        .keyword {
            color: #00698f;
        }
        .function {
            color: #8f0069;
        }
        .variable {
            color: #69d100;
        }
        .string {
            color: #d16900;
        }
        .comment {
            color: #808080;
        }
    </style>
</head>
<body>
    <h1>Main.rs Code</h1>
    <pre><code>
1. <span class="keyword">use</span> gtk::prelude::*; <span class="comment">// Import the GTK prelude, which provides various traits and types for working with GTK.</span>
2. <span class="keyword">use</span> gtk::{Application, ApplicationWindow, Box, Orientation, Align, Label}; <span class="comment">// Import specific GTK types, including Application, ApplicationWindow, Box, Orientation, Align, and Label.</span>
3. <span class="keyword">use</span> rand::Rng; <span class="comment">// Import the rand crate's Rng trait, which provides methods for generating random numbers.</span>
4. <span class="keyword">use</span> gtk::glib::{self, MainContext}; <span class="comment">// Import the glib crate, which provides a Rust wrapper around the GLib library, and the MainContext type, which represents the main context of a GTK application.</span>
5. <span class="keyword">use</span> std::time::Duration; <span class="comment">// Import the Duration type from the standard library, which represents a duration of time.</span>

6. <span class="function">fn</span> main() { <span class="comment">// Define the main function, which is the entry point of the program.</span>
7.     <span class="keyword">if</span> gtk::init().is_err() { <span class="comment">// Initialize the GTK library and check if there was an error.</span>
8.         <span class="function">println!</span>("Failed to initialize GTK"); <span class="comment">// Print an error message if GTK initialization failed.</span>
9.         <span class="keyword">return</span>; <span class="comment">// Return from the main function if GTK initialization failed.</span>
10.    }

11.    <span class="variable">let</span> app = Application::builder() <span class="comment">// Create a new Application instance using the Application::builder method.</span>
12.        .application_id("com.example.GtkWindow") <span class="comment">// Set the application ID of the Application instance.</span>
13.        .build(); <span class="comment">// Build the Application instance.</span>

14.    app.connect_activate(build_ui); <span class="comment">// Connect the activate signal of the Application instance to the build_ui function.</span>

15.    app.run(); <span class="comment">// Run the Application instance.</span>
}

16. <span class="function">fn</span> build_ui(app: &gtk::Application) { <span class="comment">// Define the build_ui function, which is called when the Application instance is activated.</span>
17.     <span class="variable">let</span> window = ApplicationWindow::builder() <span class="comment">// Create a new ApplicationWindow instance using the ApplicationWindow::builder method.</span>
18.         .application(app) <span class="comment">// Set the application of the ApplicationWindow instance.</span>
19.         .default_width(1050) <span class="comment">// Set the default width of the ApplicationWindow instance.</span>
20.         .default_height(700) <span class="comment">// Set the default height of the ApplicationWindow instance.</span>
21.         .title("Simple GUI") <span class="comment">// Set the title of the ApplicationWindow instance.</span>
22.         .build(); <span class="comment">// Build the ApplicationWindow instance.</span>

23.     window.set_position(gtk::WindowPosition::Center); <span class="comment">// Set the position of the ApplicationWindow instance to the center of the screen.</span>

24.     <span class="variable">let</span> vbox = Box::builder() <span class="comment">// Create a new Box instance using the Box::builder method.</span>
25.         .orientation(Orientation::Vertical) <span class="comment">// Set the orientation of the Box instance to vertical.</span>
26.         .spacing(6) <span class="comment">// Set the spacing of the Box instance.</span>
27.         .build(); <span class="comment">// Build the Box instance.</span>

28.     <span class="variable">let</span> label = Label::new(Some("Click me!")); <span class="comment">// Create a new Label instance with the text "Click me!"</span>
29.     label.set_markup("<b><span font-size='18000'>Click me!</span></b>"); <span class="comment">// Set the markup of the Label instance.</span>
30.     <span class="variable">let</span> button = gtk::Button::new(); <span class="comment">// Create a new Button instance.</span>
31.     button.add(&label); <span class="comment">// Add the Label instance to the Button instance.</span>
32.     button.set_halign(Align::Center); <span class="comment">// Set the horizontal alignment of the Button instance to center.</span>
33.     button.set_valign(Align::Center); <span class="comment">// Set the vertical alignment of the Button instance to center.</span>
34.     <span class="variable">let</span> window_clone = window.clone(); <span class="comment">// Clone the ApplicationWindow instance.</span>
35.     button.connect_clicked(move |_| { <span class="comment">// Connect the clicked signal of the Button instance to a closure.</span>
36.         <span class="variable">let</span> mut rng = rand::thread_rng(); <span class="comment">// Create a new random number generator.</span>
37.         <span class="variable">let</span> r: f64 = rng.gen_range(0.0..1.0); <span class="comment">// Generate a random red color component.</span>
38.         <span class="variable">let</span> g: f64 = rng.gen_range(0.0..1.0); <span class="comment">// Generate a random green color component.</span>
39.         <span class="variable">let</span> b: f64 = rng.gen_range(0.0..1.0); <span class="comment">// Generate a random blue color component.</span>
40.         <span class="variable">let</span> css_provider = gtk::CssProvider::new(); <span class="comment">// Create a new CssProvider instance.</span>
41.         <span class="variable">let</span> _ = css_provider.load_from_data(format!("window {{ background-color: rgb({}, {}, {}); }}", (r*255.0) as u8, (g*255.0) as u8, (b*255.0) as u8).as_bytes()); <span class="comment">// Load CSS data into the CssProvider instance.</span>
42.         window_clone.style_context().add_provider(&css_provider, gtk::STYLE_PROVIDER_PRIORITY_USER); <span class="comment">// Add the CssProvider instance to the style context of the ApplicationWindow instance.</span>
43.     });

44.     <span class="variable">let</span> exit_label = Label::new(Some("Exit")); <span class="comment">// Create a new Label instance with the text "Exit".</span>
45.     exit_label.set_markup("<b><span font-size='18000'>Exit</span></b>"); <span class="comment">// Set the markup of the Label instance.</span>
46.     <span class="variable">let</span> exit_button = gtk::Button::new(); <span class="comment">// Create a new Button instance.</span>
47.     exit_button.add(&exit_label); <span class="comment">// Add the Label instance to the Button instance.</span>
48.     exit_button.set_halign(Align::Center); <span class="comment">// Set the horizontal alignment of the Button instance to center.</span>
49.     exit_button.set_valign(Align::Center); <span class="comment">// Set the vertical alignment of the Button instance to center.</span>
50.     <span class="variable">let</span> app_clone = app.clone(); <span class="comment">// Clone the Application instance.</span>
51.     exit_button.connect_clicked(move |_| { <span class="comment">// Connect the clicked signal of the Button instance to a closure.</span>
52.         app_clone.quit(); <span class="comment">// Quit the Application instance.</span>
53.     });

54.     <span class="variable">let</span> countdown_label = Label::new(Some("Countdown")); <span class="comment">// Create a new Label instance with the text "Countdown".</span>
55.     countdown_label.set_markup("<b><span font-size='18000'>Countdown</span></b>"); <span class="comment">// Set the markup of the Label instance.</span>
56.     <span class="variable">let</span> countdown_button = gtk::Button::new(); <span class="comment">// Create a new Button instance.</span>
57.     countdown_button.add(&countdown_label); <span class="comment">// Add the Label instance to the Button instance.</span>
58.     countdown_button.set_halign(Align::Center); <span class="comment">// Set the horizontal alignment of the Button instance to center.</span>
59.     countdown_button.set_valign(Align::Center); <span class="comment">// Set the vertical alignment of the Button instance to center.</span>
60.     <span class="variable">let</span> app_clone = app.clone(); <span class="comment">// Clone the Application instance.</span>
61.     countdown_button.connect_clicked(move |_| { <span class="comment">// Connect the clicked signal of the Button instance to a closure.</span>
62.         <span class="variable">let</span> app_clone = app_clone.clone(); <span class="comment">// Clone the Application instance.</span>
63.         MainContext::default().spawn_local(async move { <span class="comment">// Spawn a new asynchronous task on the default main context.</span>
64.             glib::timeout_future(Duration::from_secs(3)).await; <span class="comment">// Wait for 3 seconds.</span>
65.             app_clone.quit(); <span class="comment">// Quit the Application instance.</span>
66.         });
67.     });

68.     <span class="variable">let</span> hbox = Box::builder() <span class="comment">// Create a new Box instance using the Box::builder method.</span>
69.         .orientation(Orientation::Horizontal) <span class="comment">// Set the orientation of the Box instance to horizontal.</span>
70.         .spacing(6) <span class="comment">// Set the spacing of the Box instance.</span>
71.         .build(); <span class="comment">// Build the Box instance.</span>
72.     hbox.pack_start(&button, true, true, 0); <span class="comment">// Add the Button instance to the Box instance.</span>
73.     hbox.pack_start(&countdown_button, true, true, 0); <span class="comment">// Add the Countdown Button instance to the Box instance.</span>
74.     hbox.pack_start(&exit_button, true, true, 0); <span class="comment">// Add the Exit Button instance to the Box instance.</span>
75.     vbox.pack_start(&hbox, true, true, 0); <span class="comment">// Add the horizontal Box instance to the vertical Box instance.</span>
76.     window.add(&vbox); <span class="comment">// Add the vertical Box instance to the Window instance.</span>
77.     window.show_all(); <span class="comment">// Show all widgets in the Window instance.</span>
}</code></pre>
    </body>
</html>
